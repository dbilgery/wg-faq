<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Haeufig gestellte Fragen</title>
    <meta name="description" content="FAQ fuer Studierende im Haus Wangener Marktplatz 2." />
    <link href="https://rsms.me/inter/inter.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ["Inter", "ui-sans-serif", "system-ui", "sans-serif"]
                    },
                    boxShadow: {
                        soft: "0 12px 30px rgba(0, 0, 0, 0.08)",
                        hard: "0 18px 48px rgba(0, 0, 0, 0.14)"
                    }
                }
            }
        };
    </script>
    <style>
        details>summary::-webkit-details-marker {
            display: none;
        }

        html {
            scroll-behavior: smooth;
        }

        section[id^="section-"] {
            scroll-margin-top: 110px;
        }

        input[type="search"]::-webkit-search-cancel-button,
        input[type="search"]::-webkit-search-decoration,
        input[type="search"]::-webkit-search-results-button,
        input[type="search"]::-webkit-search-results-decoration {
            -webkit-appearance: none;
            appearance: none;
            display: none;
        }

        input[type="search"] {
            -webkit-appearance: none;
            appearance: none;
        }
    </style>
</head>

<body class="bg-zinc-100 text-zinc-900 font-sans antialiased">
    <header class="sticky top-0 z-20 border-b border-zinc-200 bg-white shadow-sm">
        <div class="mx-auto flex w-full max-w-5xl items-center gap-5 px-4 py-4 sm:px-6">
            <h1 class="text-xl font-semibold tracking-tight">Wangener Marktplatz 2</h1>
            <div class="h-7 w-px bg-zinc-300"></div>
            <p class="font-medium text-zinc-900">Häufig gestellte Fragen</p>
        </div>
    </header>
    <div class="mx-auto min-h-screen w-full max-w-5xl px-4 pb-10 pt-5 sm:px-6 sm:pt-7">
        <main>
            <div class="relative">
                <label for="searchInput" class="sr-only">Stichwortsuche</label>
                <input id="searchInput" type="search" class="w-full rounded-xl border border-zinc-300 bg-zinc-50 px-4 py-3.5 pr-11 text-base text-zinc-900 shadow-sm transition placeholder:text-zinc-500 focus:border-zinc-300 focus:bg-white focus:outline-none focus:ring-0" placeholder="Stichwortsuche" autocomplete="off" />
                <button id="clearBtn" type="button" class="absolute right-2 top-1/2 hidden -translate-y-1/2 rounded-lg p-1.5 text-zinc-500 transition hover:bg-zinc-200 hover:text-zinc-800 focus:outline-none focus:ring-0" aria-label="Suche loeschen">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <section id="categorySection" class="mt-6">
                <h2 class="text-xs font-semibold uppercase tracking-[0.2em] text-zinc-500">Bereiche</h2>
                <div id="categoryCardsContainer" class="mt-3 grid grid-cols-2 gap-3 sm:grid-cols-4"></div>
            </section>
            <div id="faqContainer" class="mt-7"></div>
            <div id="emptyState" class="mt-8 hidden rounded-xl border border-zinc-200 bg-zinc-50 p-5 text-center text-sm text-zinc-600 shadow-sm" aria-live="polite">
                Keine Treffer gefunden. Versuche andere Suchbegriffe.
            </div>
        </main>
        <footer class="border-t border-zinc-200/90 px-1 py-5 text-center text-xs text-zinc-500">
            <p>&copy; Wangener Marktplatz 2 - FAQ - Stand: 08.02.2026</p>
        </footer>
    </div>
    <script>
        const FAQ = [
            {
                id: "supermarkt",
                category: "Umgebung",
                title: "Wo ist der naechste Supermarkt?",
                tags: ["einkauf", "rewe", "edeka", "supermarkt", "laden"],
                answer: "<p>Der naechste Supermarkt ist das REWE-Geschaeft in der Schlueterstrasse, nur ca. 150 Meter von WM2 entfernt.</p><p>Oeffnungszeiten: Mo-Sa 6:00-22:00 Uhr, So 7:00-22:00 Uhr.</p>",
                priority: 3
            },
            {
                id: "bushaltestelle",
                category: "Ankommen",
                title: "Wie komme ich zur naechsten Bushaltestelle?",
                tags: ["bus", "haltestelle", "verkehr", "nahverkehr", "oepnv"],
                answer: "<p>Die naechsten Bushaltestellen sind:</p><ul><li><strong>Schlueterstrasse:</strong> ca. 100m noerdlich (Linien 1, 3, 5)</li><li><strong>Marktplatz:</strong> ca. 250m westlich (alle Linien)</li></ul><p>Fahrplaninfo: Pruefe die VHB-Website oder MVG-App.</p>",
                priority: 2
            },
            {
                id: "notfall",
                category: "Notfaelle",
                title: "Was ist im Notfall zu tun?",
                tags: ["notfall", "rettung", "krankenwagen", "feuerwehr", "polizei", "112", "110", "116117"],
                answer: "<p><strong>Notruf:</strong> 112 (kostenlos von jedem Telefon)</p><p>Aerztlicher Notfalldienst: 116117</p><p>Polizei: 110</p><p>Bitte gib bei Anrufen deinen Standort (Wangener Marktplatz 2) an.</p>",
                priority: 1
            },
            {
                id: "wifi",
                category: "Alltag",
                title: "Wie verbinde ich mich mit dem WLAN?",
                tags: ["wlan", "wifi", "internet", "passwort", "verbindung", "netz"],
                answer: "<p><strong>SSID:</strong> WM2_Guest</p><p><strong>Passwort:</strong> Bitte an der Rezeption erfragen.</p><p>Falls die Verbindung nicht klappt: Einstellungen > WLAN > WM2_Guest waehlen.</p>",
                priority: 3
            },
            {
                id: "heizung",
                category: "Alltag",
                title: "Wie stelle ich die Heizung ein?",
                tags: ["heizung", "temperatur", "warm", "kalt", "thermostat"],
                answer: "<p>Der Heizkoerper wird ueber das Thermostat gesteuert. Drehe nach links zum Abkuehlen, nach rechts zum Aufwaermen.</p><p>Falls die Heizung nicht funktioniert, melde es bitte an der Rezeption.</p>",
                priority: 2
            },
            {
                id: "putzplan",
                category: "Alltag",
                title: "Wer ist wann mit Putzen dran?",
                tags: ["putzplan", "putzen", "reinigung", "sauberkeit", "plan"],
                answer: "<p>Der Putzplan haengt in der Kueche und im Treppenhaus aus.</p><p>Jeder ist fuer seinen Bereich zustaendig. Bei Fragen: Hausmeisterin ansprechen.</p>",
                priority: 2
            },
            {
                id: "muellabfuhr",
                category: "Alltag",
                title: "Wann kommt die Muellabfuhr?",
                tags: ["muell", "abfuhr", "muelltonne", "gelber sack", "entsorgung"],
                answer: "<p><strong>Dienstags und freitags:</strong> morgens ab 6:00 Uhr</p><p>Bitte stelle die Muelltonnen am Vorabend bereit.</p><p><strong>Gelbe Saecke:</strong> jeden 2. Montag</p>",
                priority: 3
            },
            {
                id: "ruhezeiten",
                category: "Alltag",
                title: "Welche Ruhezeiten gibt es?",
                tags: ["ruhe", "laerm", "nacht", "leise", "hausordnung"],
                answer: "<p><strong>Ruhezeiten:</strong></p><ul><li>Mo-Fr: 22:00-6:00 Uhr</li><li>Sa: 22:00-9:00 Uhr</li><li>So & Feiertage: 22:00-9:00 Uhr</li></ul><p>Bitte respektiere diese Zeiten.</p>",
                priority: 2
            },
            {
                id: "miete",
                category: "Alltag",
                title: "Wie und wann zahle ich Miete?",
                tags: ["miete", "zahlung", "konto", "bankverbindung", "ueberweisung"],
                answer: "<p>Die Miete ist immer am 1. des Monats faellig.</p><p>Zahlungsart: Bankueberweisung.</p><p>Die Bankverbindung haengt im Treppenhaus aus oder ist an der Rezeption erhaeltlich.</p>",
                priority: 1
            },
            {
                id: "besucher",
                category: "Alltag",
                title: "Darf ich Besuch einladen?",
                tags: ["besucher", "besuch", "gast", "uebernachtung", "freunde"],
                answer: "<p>Ja, Besuch ist willkommen.</p><p>Fuer laengere Aufenthalte (ueber 2 Wochen) informiere bitte Hausmeisterin oder Verwaltung.</p><p>Beachte die Ruhezeiten.</p>",
                priority: 2
            },
            {
                id: "hausmeisterin",
                category: "Umgebung",
                title: "Wie kontaktiere ich die Hausmeisterin?",
                tags: ["hausmeisterin", "hausmeister", "kontakt", "telefon", "verwaltung", "rezeption"],
                answer: "<p><strong>Hausmeisterin:</strong> Zimmer 001 (Erdgeschoss)</p><p><strong>Sprechzeiten:</strong> Mo-Fr 8:00-12:00 und 14:00-17:00 Uhr</p><p>Fuer dringende Probleme: Aushang im Treppenhaus beachten.</p>",
                priority: 1
            },
            {
                id: "reparatur",
                category: "Notfaelle",
                title: "Was mache ich bei Schaeden?",
                tags: ["schaden", "reparatur", "defekt", "schadensmeldung", "kaputt"],
                answer: "<p>Melde Schaeden sofort der Hausmeisterin.</p><p>Bitte notiere:</p><ul><li>Was ist kaputt?</li><li>Wann bemerkt?</li><li>Kontaktdaten</li></ul><p>Fotos helfen bei der Bearbeitung.</p>",
                priority: 1
            },
            {
                id: "paket",
                category: "Alltag",
                title: "Wo erhalte ich Pakete?",
                tags: ["paket", "post", "dhl", "hermes", "sendung"],
                answer: "<p>Pakete werden in der Rezeption angenommen.</p><p>Pruefe dein Postfach in der Eingangshalle auf Hinweise.</p><p>Wichtig: Name und Zimmernummer auf dem Paket.</p>",
                priority: 2
            },
            {
                id: "parkplatz",
                category: "Ankommen",
                title: "Wo kann ich mein Auto parken?",
                tags: ["parkplatz", "auto", "parken", "garage", "fahrzeug", "parkkarte"],
                answer: "<p>Parkplaetze befinden sich in der Tiefgarage unter dem Gebaeude.</p><p>Strassenparken in der Schlueterstrasse ist gebuehrenpflichtig.</p><p>Parkkarten gibt es in der Rezeption.</p>",
                priority: 2
            },
            {
                id: "waesche",
                category: "Alltag",
                title: "Wie benutze ich Waschmaschine und Trockner?",
                tags: ["waesche", "waschen", "trockner", "waschmaschine", "waschkeller"],
                answer: "<p><strong>Standort:</strong> Waschkeller (Erdgeschoss)</p><p><strong>Bedienung:</strong> Muenzen oder Wertmarken (Rezeption)</p><p><strong>Oeffnungszeiten:</strong> taeglich 6:00-22:00 Uhr</p><p>Bitte die Maschinen direkt nach Nutzung leeren.</p>",
                priority: 3
            },
            {
                id: "kaputt-wc",
                category: "Notfaelle",
                title: "Was tue ich, wenn die Toilette verstopft ist?",
                tags: ["toilette", "wc", "verstopft", "abfluss", "defekt"],
                answer: "<p>Versuche es zuerst mit einer Saugglocke.</p><p>Wenn es nicht hilft: sofort der Hausmeisterin melden.</p><p><strong>Wichtig:</strong> Keine Feuchttuecher, Windeln oder Fremdkoerper in die Toilette werfen.</p>",
                priority: 1
            },
            {
                id: "wasser-aus",
                category: "Notfaelle",
                title: "Was mache ich bei Wasserschaden?",
                tags: ["wasser", "wasserschaden", "leck", "rohr", "notfall"],
                answer: "<p><strong>Sofort:</strong> Hauptwasserhahn schliessen.</p><p><strong>Dann:</strong> Hausmeisterin informieren.</p><p><strong>Danach:</strong> Feuchtigkeit aufnehmen und lueften.</p>",
                priority: 1
            },
            {
                id: "versicherung",
                category: "Alltag",
                title: "Bin ich versichert?",
                tags: ["versicherung", "haftung", "schutz", "schaden"],
                answer: "<p>Es gibt eine Grundversicherung fuer Schaeden durch Drittpersonen.</p><p>Fuer Details kontaktiere die Verwaltung oder hole den Infoflyer an der Rezeption.</p>",
                priority: 2
            }
        ];

        const categories = ["Alltag", "Ankommen", "Notfaelle", "Umgebung"];
        const synonyms = {
            hausverwaltung: "verwaltung",
            hausmeister: "hausmeisterin",
            caretaker: "hausmeisterin",
            internet: "wlan",
            muelltonne: "muell",
            notruf: "notfall"
        };

        const heroIcons = {
            Alltag: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-zinc-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.7"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3v2.25m4.5-2.25v2.25M3 9.75h18M4.5 6.75h15a1.5 1.5 0 011.5 1.5V19.5a1.5 1.5 0 01-1.5 1.5h-15A1.5 1.5 0 013 19.5V8.25a1.5 1.5 0 011.5-1.5z" /></svg>`,
            Ankommen: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-zinc-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.7"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21s8-4.5 8-11a8 8 0 10-16 0c0 6.5 8 11 8 11z" /><circle cx="12" cy="10" r="2.5" /></svg>`,
            Notfaelle: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-zinc-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.7"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m0 3h.008v.008H12v-.008z" /><path stroke-linecap="round" stroke-linejoin="round" d="M10.29 3.86L1.82 18a2.25 2.25 0 001.93 3.37h16.5a2.25 2.25 0 001.93-3.37L13.71 3.86a2.25 2.25 0 00-3.42 0z" /></svg>`,
            Umgebung: `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-zinc-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.7"><path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 10-7.18 0m7.18 0A9.97 9.97 0 0112 15c-1.31 0-2.56.25-3.59.7m7.18-1.33a6 6 0 00-7.18 0M12 21a8.96 8.96 0 005.5-1.88M12 21a8.96 8.96 0 01-5.5-1.88" /></svg>`
        };

        function normalize(input) {
            return input
                .toLowerCase()
                .normalize("NFD")
                .replace(/[\u0300-\u036f]/g, "")
                .replace(/ß/g, "ss")
                .replace(/[^a-z0-9 ]/g, " ")
                .replace(/\s+/g, " ")
                .trim();
        }

        function tokenize(input) {
            const normalized = normalize(input);
            if (!normalized) return [];
            const raw = normalized.split(" ").filter(Boolean);
            return raw.map((token) => synonyms[token] || token);
        }

        function levenshtein(a, b) {
            if (a === b) return 0;
            if (!a.length) return b.length;
            if (!b.length) return a.length;

            const matrix = Array.from({ length: b.length + 1 }, () => Array(a.length + 1).fill(0));
            for (let i = 0; i <= a.length; i++) matrix[0][i] = i;
            for (let j = 0; j <= b.length; j++) matrix[j][0] = j;

            for (let j = 1; j <= b.length; j++) {
                for (let i = 1; i <= a.length; i++) {
                    const cost = a[i - 1] === b[j - 1] ? 0 : 1;
                    matrix[j][i] = Math.min(
                        matrix[j - 1][i] + 1,
                        matrix[j][i - 1] + 1,
                        matrix[j - 1][i - 1] + cost
                    );
                }
            }
            return matrix[b.length][a.length];
        }

        function computeRank(item, query) {
            const queryNormalized = normalize(query);
            if (!queryNormalized) return 0;

            const queryTokens = tokenize(query);
            const title = normalize(item.title);
            const tags = normalize(item.tags.join(" "));
            const answer = normalize(item.answer.replace(/<[^>]*>/g, " "));

            const titleWords = title.split(" ");
            const tagWords = tags.split(" ");
            const answerWords = answer.split(" ");

            let score = 0;
            if (title.includes(queryNormalized)) score += 5;
            if (tags.includes(queryNormalized)) score += 3;
            if (answer.includes(queryNormalized)) score += 1;

            for (const token of queryTokens) {
                if (titleWords.includes(token)) score += 2.5;
                if (tagWords.includes(token)) score += 2;
                if (answerWords.includes(token)) score += 0.5;

                const titleNear = titleWords.some((w) => Math.abs(w.length - token.length) <= 1 && levenshtein(token, w) <= 1);
                const tagNear = tagWords.some((w) => Math.abs(w.length - token.length) <= 1 && levenshtein(token, w) <= 1);
                if (titleNear) score += 1.2;
                if (tagNear) score += 0.8;
            }

            score += (4 - item.priority) * 0.12;
            return score;
        }

        function escapeHtml(text) {
            const map = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" };
            return text.replace(/[&<>"']/g, (m) => map[m]);
        }

        function highlightTitle(title, query) {
            const token = query.trim();
            if (!token) return escapeHtml(title);
            const safeTitle = escapeHtml(title);
            const escapedToken = token.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
            const regex = new RegExp(`(${escapedToken})`, "ig");
            return safeTitle.replace(regex, '<span class="rounded bg-zinc-200 px-0.5">$1</span>');
        }

        function renderFaqItem(item, query = "") {
            const details = document.createElement("details");
            details.className = "group overflow-hidden rounded-xl border border-zinc-200 bg-white shadow-sm transition open:shadow-soft";
            details.innerHTML = `
                <summary class="flex min-h-12 cursor-pointer items-center justify-between gap-3 px-4 py-3 focus:outline-none focus:ring-0">
                    <p class="m-0 text-left text-[0.96rem] font-medium text-zinc-900">${highlightTitle(item.title, query)}</p>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0 text-zinc-500 transition group-open:rotate-180" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M6 9l6 6 6-6"></path>
                    </svg>
                </summary>
                <div class="border-t border-zinc-100 px-4 pb-4 pt-3 text-[0.92rem] leading-6 text-zinc-700">${item.answer}</div>
            `;
            return details;
        }

        function renderCategoryCards() {
            const container = document.getElementById("categoryCardsContainer");
            container.innerHTML = "";

            categories.forEach((category) => {
                const anchor = document.createElement("a");
                const sectionId = `section-${normalize(category)}`;
                anchor.href = `#${sectionId}`;
                anchor.className = "rounded-xl border border-zinc-200 bg-zinc-50 px-3 py-3 text-left shadow-sm transition hover:-translate-y-0.5 hover:bg-white hover:shadow-soft focus:outline-none focus:ring-0";
                anchor.setAttribute("aria-label", `Zum Bereich ${category} springen`);
                anchor.innerHTML = `
                    <div class="flex items-center gap-2">
                        ${heroIcons[category]}
                        <span class="text-sm font-semibold text-zinc-800">${category}</span>
                    </div>
                `;
                container.appendChild(anchor);
            });
        }

        function renderGroupedFaq(items, query = "") {
            const faqContainer = document.getElementById("faqContainer");
            faqContainer.innerHTML = "";

            const grouped = {};
            for (const item of items) {
                if (!grouped[item.category]) grouped[item.category] = [];
                grouped[item.category].push(item);
            }

            categories.forEach((category) => {
                if (!grouped[category]?.length) return;

                const section = document.createElement("section");
                section.className = "mb-8";
                section.id = `section-${normalize(category)}`;
                section.innerHTML = `
                    <h2 class="mb-3 flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.2em] text-zinc-500">
                        ${heroIcons[category]}
                        <span>${category}</span>
                    </h2>
                `;

                const list = document.createElement("div");
                list.className = "space-y-3";
                grouped[category].forEach((item) => list.appendChild(renderFaqItem(item, query)));
                section.appendChild(list);
                faqContainer.appendChild(section);
            });
        }

        function render() {
            const input = document.getElementById("searchInput");
            const query = input.value.trim();
            const clearBtn = document.getElementById("clearBtn");
            const categorySection = document.getElementById("categorySection");
            const faqContainer = document.getElementById("faqContainer");
            const emptyState = document.getElementById("emptyState");
            if (!query) {
                clearBtn.classList.add("hidden");
                categorySection.classList.remove("hidden");
                renderGroupedFaq(FAQ, "");
                emptyState.classList.add("hidden");
                return;
            }

            clearBtn.classList.remove("hidden");
            categorySection.classList.add("hidden");

            const results = FAQ
                .map((item) => ({ ...item, rank: computeRank(item, query) }))
                .filter((item) => item.rank >= 1)
                .sort((a, b) => b.rank - a.rank);

            if (results.length === 0) {
                faqContainer.innerHTML = "";
                emptyState.classList.remove("hidden");
            } else {
                emptyState.classList.add("hidden");
                renderGroupedFaq(results, query);
            }
        }

        document.getElementById("searchInput").addEventListener("input", render);
        document.getElementById("clearBtn").addEventListener("click", () => {
            const input = document.getElementById("searchInput");
            input.value = "";
            render();
            input.focus();
        });

        renderCategoryCards();
        render();
    </script>
</body>

</html>
