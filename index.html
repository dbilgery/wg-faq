<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Haeufig gestellte Fragen</title>
    <meta name="description" content="Wangener Marktplatz 2" />
    <link href="https://rsms.me/inter/inter.css" rel="stylesheet" />
    <style>
        :root {
            --bg: #ffffff;
            --surface: #fafafa;
            --surface-strong: #fafafa;
            --text: #111216;
            --muted: #62646c;
            --border: rgba(17, 18, 22, 0.1);
            --border-strong: rgba(17, 18, 22, 0.16);
            --radius-shell: 26px;
            --radius-card: 10px;
            --radius-pill: 999px;
            --shadow-soft: 0 1px 2px rgba(0, 0, 0, 0.03), 0 10px 24px rgba(0, 0, 0, 0.04);
            --focus: 0 0 0 3px rgba(67, 56, 202, 0.22);
            --speed: 180ms cubic-bezier(.2, .8, .2, 1);
            --accordion-speed: 260ms cubic-bezier(.22, .61, .36, 1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            background: var(--bg);
            font-family: "Inter", ui-sans-serif, system-ui, sans-serif;
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }

        .shell {
            min-height: 100vh;
            background: var(--bg);
            border-bottom-left-radius: var(--radius-shell);
            border-bottom-right-radius: var(--radius-shell);
            padding: 54px 20px 64px;
        }

        .container {
            width: min(760px, 100%);
            margin: 0 auto;
        }

        .hero {
            text-align: center;
            margin-bottom: 30px;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 4px 8px;
            font-size: 12px;
            color: var(--muted);
            background: var(--surface-strong);
            margin-bottom: 18px;
        }

        .hero h1 {
            margin: 0;
            font-size: clamp(2rem, 5.4vw, 4rem);
            line-height: 1.06;
            letter-spacing: -0.03em;
            font-weight: 700;
        }

        .hero p {
            margin: 18px auto 0;
            max-width: 620px;
            font-size: clamp(1rem, 2.8vw, 2rem);
            color: var(--muted);
            line-height: 1.55;
        }

        .faq-list {
            width: min(640px, 100%);
            margin: 0 auto;
            display: grid;
            gap: 10px;
        }

        .faq-search {
            width: min(640px, 100%);
            margin: 0 auto 14px;
            position: relative;
        }

        .faq-search-input {
            width: 100%;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: #fff;
            color: var(--text);
            font: inherit;
            font-size: 15px;
            padding: 12px 14px;
            padding-right: 44px;
            outline: none;
            transition: border-color var(--speed), box-shadow var(--speed);
            appearance: none;
            -webkit-appearance: none;
        }

        .faq-search-input::placeholder {
            color: #8a8d97;
        }

        .faq-search-input:focus-visible {
            border-color: var(--border);
            box-shadow: none;
        }

        .faq-search-input:focus {
            border-color: var(--border);
            box-shadow: none;
        }

        .faq-search-input::-webkit-search-decoration,
        .faq-search-input::-webkit-search-cancel-button,
        .faq-search-input::-webkit-search-results-button,
        .faq-search-input::-webkit-search-results-decoration {
            -webkit-appearance: none;
            appearance: none;
            display: none;
        }

        .faq-search-clear {
            position: absolute;
            top: 50%;
            right: 8px;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            border: 0;
            border-radius: 10px;
            background: #ececf0;
            color: #3b3d44;
            display: inline-grid;
            place-items: center;
            cursor: pointer;
            padding: 0;
            transition: background-color var(--speed);
        }

        .faq-search-clear:hover {
            background: #e1e2e8;
        }

        .faq-search-clear:focus-visible {
            outline: none;
            box-shadow: none;
        }

        .faq-search-clear[hidden] {
            display: none;
        }

        .faq-highlight {
            background: #e4e4e7;
            border-radius: 4px;
            padding: 0 2px;
        }

        .faq-item {
            border: 1px solid var(--border);
            border-radius: var(--radius-card);
            background: var(--surface);
            box-shadow: 0 1px 0 rgba(255, 255, 255, 0.75) inset;
            transition: transform var(--speed), box-shadow var(--speed), border-color var(--speed), background-color var(--speed);
            overflow: hidden;
        }

        .faq-item:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-soft);
            background: var(--surface-strong);
        }

        .faq-item.open {
            border-color: var(--border-strong);
            background: #f9f9fa;
            box-shadow: var(--shadow-soft);
        }

        .faq-trigger {
            width: 100%;
            border: 0;
            background: transparent;
            color: inherit;
            padding: 16px 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            text-align: left;
            cursor: pointer;
            font: inherit;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .faq-trigger:focus-visible {
            box-shadow: var(--focus);
            border-radius: 8px;
        }

        .faq-question {
            margin: 0;
            font-size: 28px;
            font-size: clamp(1rem, 1.4vw, 1.08rem);
            line-height: 1.35;
            font-weight: 600;
        }

        .faq-plus {
            width: 22px;
            height: 22px;
            display: grid;
            place-items: center;
            color: #1d1f25;
            flex: 0 0 auto;
            transition: transform var(--speed), color var(--speed);
            border-radius: 999px;
        }

        .faq-item.open .faq-plus {
            transform: rotate(45deg);
            color: #111216;
        }

        .faq-panel {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            will-change: max-height, opacity;
            contain: layout paint;
            transform: translateZ(0);
            transition: max-height var(--accordion-speed), opacity var(--accordion-speed);
        }

        .faq-item.open .faq-panel {
            max-height: var(--panel-max, 420px);
            opacity: 1;
        }

        .faq-panel-inner {
            border-top: 1px solid var(--border);
            padding: 12px 18px 18px;
            font-size: 15px;
            line-height: 1.65;
            color: #3f424d;
        }

        .faq-panel-inner p {
            margin: 0 0 10px;
        }

        .faq-panel-inner p:last-child {
            margin-bottom: 0;
        }

        .faq-panel-inner ul {
            margin: 8px 0 8px 20px;
            padding: 0;
        }

        .empty {
            width: min(640px, 100%);
            margin: 14px auto 0;
            border: 1px solid var(--border);
            border-radius: var(--radius-card);
            padding: 16px;
            text-align: center;
            color: var(--muted);
            background: var(--surface);
        }

        .contact {
            text-align: center;
            margin-top: 54px;
        }

        .contact p {
            margin: 0 0 16px;
            color: var(--muted);
            font-size: 16px;
        }

        @media (max-width: 700px) {
            :root {
                --accordion-speed: 220ms cubic-bezier(.22, .61, .36, 1);
            }

            .shell {
                padding-top: 36px;
            }

            .hero p {
                font-size: 16px;
            }

            .faq-trigger {
                padding: 14px 14px;
            }

            .faq-panel-inner {
                padding: 10px 14px 14px;
            }

            .faq-item {
                transition: border-color var(--speed), background-color var(--speed);
            }

            .faq-item:hover {
                transform: none;
                box-shadow: 0 1px 0 rgba(255, 255, 255, 0.75) inset;
                background: var(--surface);
            }

            .faq-item.open {
                box-shadow: 0 1px 0 rgba(255, 255, 255, 0.75) inset, 0 6px 14px rgba(0, 0, 0, 0.06);
            }

            .contact {
                margin-top: 42px;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                transition: none !important;
                animation: none !important;
            }
        }
    </style>
</head>

<body>
    <div class="shell">
        <div class="container">
            <header class="hero" aria-label="FAQ Header">
                <span class="hero-badge">Wangener Marktplatz 2</span>
                <h1>Häufig gestellte Fragen</h1>
                <p>Alles Infos zu deiner WG auf einen Blick.</p>
            </header>
            <div class="faq-search">
                <input id="faqSearch" class="faq-search-input" type="search" placeholder="Suche" autocomplete="off" aria-label="FAQ durchsuchen" />
                <button id="faqSearchClear" class="faq-search-clear" type="button" aria-label="Suche leeren" hidden>
                    <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18"></path>
                    </svg>
                </button>
            </div>
            <section id="faqContainer" class="faq-list" aria-label="FAQ Eintraege"></section>
            <div id="emptyState" class="empty" hidden>Keine Treffer gefunden. Versuche andere Suchbegriffe.</div>
            <div class="contact" aria-label="Kontakt Bereich">
                <p>Du hast noch Fragen? Schreib uns einfach auf Whatsapp.</p>
            </div>
        </div>
    </div>
    <script>
        // categories: Ankommen, Umgebung, Alltag, Auszug 
        const FAQ = [
            { id: "wifi", category: "Alltag", title: "Wie verbinde ich mich mit dem WLAN?", answer: "<p><strong>SSID:</strong> WM2_Guest</p><p><strong>Passwort:</strong> Bitte an der Rezeption erfragen.</p><p>Falls die Verbindung nicht klappt: Einstellungen > WLAN > WM2_Guest waehlen.</p>" },
            { id: "waesche", category: "Alltag", title: "Wie benutze ich Waschmaschine und Trockner?", answer: "<p><strong>Standort:</strong> Waschkeller (1. UG). Durchgang nutzen um an Waschraum zu gelangen.</p><p><strong>Bedienung:</strong> 2€-Münzen einwerfen. 2€ = 2:30h waschen, unabhängig des Waschprogramms.</p><p><strong>Tipps:</strong> Vario Taste drücken, um Waschdauer an tatsächliche Waschmenge anzupassen.</strong></p><p><strong>Hinweis:</strong> Die Waschmaschine geht nach Ablauf der Zeit automatisch aus und unterbricht einen noch laufenden Waschvorgang.</p><p><strong>Beachten:</strong> Bitte die Maschinen direkt nach Nutzung leeren, damit andere Mitbewohner auch waschen können.</p>" },
            { id: "supermarkt", category: "Umgebung", title: "Wo ist der naechste Supermarkt?", answer: "<p>Der naechste Supermarkt ist das REWE-Geschaeft in der Schlueterstrasse, nur ca. 150 Meter von WM2 entfernt.</p><p>Oeffnungszeiten: Mo-Sa 6:00-22:00 Uhr, So 7:00-22:00 Uhr.</p>" },
            { id: "bushaltestelle", category: "Ankommen", title: "Wie komme ich zur naechsten Bushaltestelle?", answer: "<p>Die naechsten Bushaltestellen sind:</p><ul><li><strong>Schlueterstrasse:</strong> ca. 100m noerdlich (Linien 1, 3, 5)</li><li><strong>Marktplatz:</strong> ca. 250m westlich (alle Linien)</li></ul><p>Fahrplaninfo: Pruefe die VHB-Website oder MVG-App.</p>" },
            { id: "heizung", category: "Alltag", title: "Wie stelle ich die Heizung ein?", answer: "<p>Der Heizkoerper wird ueber das Thermostat gesteuert. Drehe nach links zum Abkuehlen, nach rechts zum Aufwaermen.</p><p>Falls die Heizung nicht funktioniert, melde es bitte an der Rezeption.</p>" },
            { id: "muellabfuhr", category: "Alltag", title: "Wann kommt die Muellabfuhr?", answer: "<p><strong>Dienstags und freitags:</strong> morgens ab 6:00 Uhr</p><p>Bitte stelle die Muelltonnen am Vorabend bereit.</p><p><strong>Gelbe Saecke:</strong> jeden 2. Montag</p>" },
            { id: "ruhezeiten", category: "Alltag", title: "Welche Ruhezeiten gibt es?", answer: "<p><strong>Ruhezeiten:</strong></p><ul><li>Mo-Fr: 22:00-6:00 Uhr</li><li>Sa: 22:00-9:00 Uhr</li><li>So & Feiertage: 22:00-9:00 Uhr</li></ul><p>Bitte respektiere diese Zeiten.</p>" },
            { id: "besucher", category: "Alltag", title: "Darf ich Besuch einladen?", answer: "<p>Ja, Besuch ist willkommen.</p><p>Fuer laengere Aufenthalte (ueber 2 Wochen) informiere bitte Hausmeisterin oder Verwaltung.</p><p>Beachte die Ruhezeiten.</p>" },
            { id: "parkplatz", category: "Ankommen", title: "Wo kann ich mein Auto parken?", answer: "<p>Parkplaetze befinden sich in der Tiefgarage unter dem Gebaeude.</p><p>Strassenparken in der Schlueterstrasse ist gebuehrenpflichtig.</p><p>Parkkarten gibt es in der Rezeption.</p>" },
        ];

        const openIds = new Set();
        const synonyms = {
            wlan: "wifi",
            internet: "wifi",
            netz: "wifi",
            miete: "miete"
        };

        const faqSearchIndex = FAQ.map((item, index) => ({
            ...item,
            tags: Array.isArray(item.tags) ? item.tags : [item.category, item.id.replace(/-/g, " ")],
            priority: typeof item.priority === "number" ? item.priority : 2,
            sourceIndex: index
        }));
        let searchQuery = "";

        function normalize(input) {
            return String(input || "")
                .toLowerCase()
                .normalize("NFD")
                .replace(/[\u0300-\u036f]/g, "")
                .replace(/\u00df/g, "ss")
                .replace(/ß/g, "ss")
                .replace(/[^a-z0-9 ]/g, " ")
                .replace(/\s+/g, " ")
                .trim();
        }

        function tokenize(input) {
            const normalized = normalize(input);
            if (!normalized) return [];
            const raw = normalized.split(" ").filter(Boolean);
            return raw.map((token) => synonyms[token] || token);
        }

        function levenshtein(a, b) {
            if (a === b) return 0;
            if (!a.length) return b.length;
            if (!b.length) return a.length;

            const matrix = Array.from({ length: b.length + 1 }, () => Array(a.length + 1).fill(0));
            for (let i = 0; i <= a.length; i++) matrix[0][i] = i;
            for (let j = 0; j <= b.length; j++) matrix[j][0] = j;

            for (let j = 1; j <= b.length; j++) {
                for (let i = 1; i <= a.length; i++) {
                    const cost = a[i - 1] === b[j - 1] ? 0 : 1;
                    matrix[j][i] = Math.min(
                        matrix[j - 1][i] + 1,
                        matrix[j][i - 1] + 1,
                        matrix[j - 1][i - 1] + cost
                    );
                }
            }
            return matrix[b.length][a.length];
        }

        function computeRank(item, query) {
            const queryNormalized = normalize(query);
            if (!queryNormalized) return 0;

            const queryTokens = tokenize(query);
            const title = normalize(item.title);
            const tags = normalize((item.tags || []).join(" "));
            const answer = normalize(item.answer.replace(/<[^>]*>/g, " "));

            const titleWords = title.split(" ");
            const tagWords = tags.split(" ");
            const answerWords = answer.split(" ");

            let score = 0;
            if (title.includes(queryNormalized)) score += 5;
            if (tags.includes(queryNormalized)) score += 3;
            if (answer.includes(queryNormalized)) score += 1;

            for (const token of queryTokens) {
                if (titleWords.includes(token)) score += 2.5;
                if (tagWords.includes(token)) score += 2;
                if (answerWords.includes(token)) score += 0.5;

                const titleNear = titleWords.some((w) => Math.abs(w.length - token.length) <= 1 && levenshtein(token, w) <= 1);
                const tagNear = tagWords.some((w) => Math.abs(w.length - token.length) <= 1 && levenshtein(token, w) <= 1);
                if (titleNear) score += 1.2;
                if (tagNear) score += 0.8;
            }

            score += (4 - item.priority) * 0.12;
            return score;
        }

        function escapeHtml(text) {
            const map = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" };
            return String(text || "").replace(/[&<>"']/g, (m) => map[m]);
        }

        function highlightTitle(title, query) {
            const token = query.trim();
            if (!token) return escapeHtml(title);
            const safeTitle = escapeHtml(title);
            const escapedToken = token.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
            const regex = new RegExp(`(${escapedToken})`, "ig");
            return safeTitle.replace(regex, '<span class="faq-highlight">$1</span>');
        }

        function getFilteredFaq() {
            const query = searchQuery.trim();
            if (!query) return faqSearchIndex;

            return faqSearchIndex
                .map((item) => ({ ...item, rank: computeRank(item, query) }))
                .filter((item) => item.rank >= 1)
                .sort((a, b) => {
                    if (b.rank !== a.rank) return b.rank - a.rank;
                    return a.sourceIndex - b.sourceIndex;
                });
        }

        function renderFaq() {
            const container = document.getElementById("faqContainer");
            const emptyState = document.getElementById("emptyState");
            const clearButton = document.getElementById("faqSearchClear");
            const visibleItems = getFilteredFaq();
            container.innerHTML = "";

            visibleItems.forEach((item) => {
                const isOpen = openIds.has(item.id);
                const panelId = `panel-${item.id}`;
                const buttonId = `trigger-${item.id}`;

                const row = document.createElement("article");
                row.className = `faq-item${isOpen ? " open" : ""}`;
                row.innerHTML = `
          <button id="${buttonId}" class="faq-trigger" type="button" aria-expanded="${isOpen}" aria-controls="${panelId}">
            <p class="faq-question">${highlightTitle(item.title, searchQuery)}</p>
            <span class="faq-plus" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                <path d="M12 5v14M5 12h14"></path>
              </svg>
            </span>
          </button>
          <div id="${panelId}" class="faq-panel" role="region" aria-labelledby="${buttonId}" aria-hidden="${isOpen ? "false" : "true"}">
            <div class="faq-panel-inner">${item.answer}</div>
          </div>
                `;
                container.appendChild(row);
                const panel = row.querySelector(".faq-panel");
                const inner = row.querySelector(".faq-panel-inner");
                if (panel && inner) panel.style.setProperty("--panel-max", `${inner.scrollHeight}px`);
            });

            emptyState.hidden = visibleItems.length > 0;
            clearButton.hidden = !searchQuery.trim();
        }

        function animatePanel(item, expand) {
            const panel = item.querySelector(".faq-panel");
            const trigger = item.querySelector(".faq-trigger");
            const inner = item.querySelector(".faq-panel-inner");

            if (!panel || !trigger || !inner) return;

            panel.style.setProperty("--panel-max", `${inner.scrollHeight}px`);
            item.classList.toggle("open", expand);
            trigger.setAttribute("aria-expanded", String(expand));
            panel.setAttribute("aria-hidden", String(!expand));
        }

        let resizeRaf = 0;
        window.addEventListener("resize", () => {
            if (resizeRaf) cancelAnimationFrame(resizeRaf);
            resizeRaf = requestAnimationFrame(() => {
                document.querySelectorAll(".faq-item.open").forEach((item) => {
                    const panel = item.querySelector(".faq-panel");
                    const inner = item.querySelector(".faq-panel-inner");
                    if (panel && inner) panel.style.setProperty("--panel-max", `${inner.scrollHeight}px`);
                });
            });
        }, { passive: true });

        document.getElementById("faqContainer").addEventListener("click", (e) => {
            const trigger = e.target.closest(".faq-trigger");
            if (!trigger) return;
            const item = trigger.closest(".faq-item");
            if (!item) return;

            const id = trigger.id.replace("trigger-", "");
            const isOpen = trigger.getAttribute("aria-expanded") === "true";
            const next = !isOpen;

            if (next) openIds.add(id);
            else openIds.delete(id);

            animatePanel(item, next);
        });

        document.getElementById("faqSearch").addEventListener("input", (e) => {
            searchQuery = e.target.value || "";
            renderFaq();
        });

        document.getElementById("faqSearchClear").addEventListener("click", () => {
            const input = document.getElementById("faqSearch");
            input.value = "";
            searchQuery = "";
            renderFaq();
            input.focus();
        });

        renderFaq();
    </script>
</body>

</html>